---
import BaseLayout from "../layouts/BaseLayout.astro";
import ProfileCard from "../components/ProfileCard.astro";
import BlogPostList from "../components/BlogPostList.astro";
import { getValidBlogPosts } from "../lib/utils"; // Import the new function
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";

// Fetch and validate blog posts using the utility function
const validPosts = await getValidBlogPosts();

// Page metadata using constants
const title = SITE_TITLE;
const description = SITE_DESCRIPTION;
---
<BaseLayout title={title} description={description}>
    <ProfileCard />
    <section class="mt-16" aria-labelledby="recent-posts-heading">
        <h2 id="recent-posts-heading" class="mb-8 text-2xl font-bold">Recent Posts</h2>
        <BlogPostList posts={validPosts} postsPerPage={3} showSeeMore={true} />
    </section>
</BaseLayout>